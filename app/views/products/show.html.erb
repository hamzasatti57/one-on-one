<style type="text/css">
  .hidden{
    display: none;
  }
   .modal-header{
   border-bottom: none !important;
   }
   .zoom-custom{
   cursor: pointer !important;
   }
   .custom-link a{
   color: #777777;
   }
   .single_product_item .single_product_text a {
   display: initial !important;
   visibility: visible !important;
   }
   .custom-reload{
   font-size: 15px !important;
   cursor: pointer;
   }
   .s_product_text .list li a span{
   width: 85px !important;
   }
   .custom_radio_btn_tab{
   /*background-color: #f3f3f3;*/
   border-radius: 5px;
   padding: 5px;}

   .custom_radio_btn_tab .form-check{
    /*display: contents !important;*/
   }

   .custom_radio_btn_tab input.custom-radio-tab {
   position: absolute;
   left: -99999em;
   /*top: -99999em;*/
   opacity: 1;
   z-index: 1;
   }
   .custom_radio_btn_tab input.custom-radio-tab+label {
   cursor: pointer;
   float: left;
   border: 1px solid #aaa;
   margin-right: -1px;
   /*padding: 1px 1px;*/
   position: relative;
   display: flex;
   margin: 5px 5px;
   /*border-radius: 50px;*/
   }
   .custom_radio_btn_tab input.custom-radio-tab+label:hover {
   /*background-color: #ccc;*/
   /*box-shadow: 0px 1px 3px 0px #0003;*/
   }
   .custom_radio_btn_tab [type=radio]:checked+label {
   /*background-color: #efefef;*/
   border:1px solid red;
   /*box-shadow: 0px 1px 3px 0px #0003;*/
   z-index: 1;
   }
   .custom_img_picker{
   width: 45px;
   height: 45px;
   /*margin: 0px 10px;*/
   }

   .custom_img_picker img{
    background-size: cover;
    background-repeat: no-repeat;
    width: 100%;
    height: 100%;
    object-fit: cover;
    cursor: pointer;
   }

   .modal-body{
   padding-top: 30px;
   padding-bottom: 30px;
   margin: auto;
   }

   /*-----slider section start ----*/

  .csSlideOuter {
   overflow: hidden;
}
.lightSlider:before, .lightSlider:after {
   content: " ";
   display: table;
}
.csSlideWrapper > .lightSlider:after {
   clear: both;
}
.csSlideWrapper .csSlide {
   -webkit-transform: translate(0px, 0px);
   -ms-transform: translate(0px, 0px);
   transform: translate(0px, 0px);
   -webkit-transition: all 1s;
   transition: all 1s;
   -webkit-transition-duration: inherit;
   transition-duration: inherit;
   -webkit-transition-timing-function: inherit;
   transition-timing-function: inherit;
}
.csSlideWrapper .csFade {
   position: relative;
}
.csSlideWrapper .csFade > * {
   position: absolute !important;
   top: 0;
   left: 0;
   z-index: 9;
   margin-right: 0;
   width: 100%;
}
.csSlideWrapper.usingCss .csFade > * {
   opacity: 0;
   -webkit-transition-delay: 0s;
   transition-delay: 0s;
   -webkit-transition-duration: inherit;
   transition-duration: inherit;
   -webkit-transition-property: opacity;
   transition-property: opacity;
   -webkit-transition-timing-function: inherit;
   transition-timing-function: inherit;
}
.csSlideWrapper .csFade > *.active {
   z-index: 10;
}
.csSlideWrapper.usingCss .csFade > *.active {
   opacity: 1;
}
/** /!!! End of core css Should not edit !!!/**/

/* Pager */
.csSlideOuter .csPager.cSpg {
   margin: 10px 0 0;
   padding: 0; 
   text-align: center;
}
.csSlideOuter .csPager.cSpg > li {
   cursor: pointer;
   display: inline-block;
   padding: 0 5px;
  list-style-type: none;
}
.csSlideOuter .csPager.cSpg > li a {
   background-color: #222222;
   border-radius: 30px;
   display: inline-block;
   height: 8px;
   overflow: hidden;
   text-indent: -999em;
   width: 8px;
   position: relative;
   z-index: 99;
   -webkit-transition: all 0.5s linear 0s;
   transition: all 0.5s linear 0s;
}
.csSlideOuter .csPager.cSpg > li:hover a, .csSlideOuter .csPager.cSpg > li.active a {
   background-color: #428bca;
}
.csSlideOuter .media {
   opacity: 0.8;
}
.csSlideOuter .media.active {
   opacity: 1;
}
/* End of pager */

/** Gallery */
.csSlideOuter .csPager.cSGallery {
   list-style: none outside none;
   padding-left: 0;
   margin: 0;
   -webkit-touch-callout: none;
   -webkit-user-select: none;
   -khtml-user-select: none;
   -moz-user-select: none;
   -ms-user-select: none;
   user-select: none;
}
.csSlideOuter .csPager.cSGallery li {
   opacity: 0.7;
   -webkit-transition: opacity 0.35s linear 0s;
   transition: opacity 0.35s linear 0s;
}
.csSlideOuter .csPager.cSGallery li.active, .csSlideOuter .csPager.cSGallery li:hover {
   opacity: 1;
}
.csSlideOuter .csPager.cSGallery img {
   display: block;
   height: auto;
   max-width: 100%;
}
.csSlideOuter .csPager.cSGallery:before, .csSlideOuter .csPager.cSGallery:after {
   content: " ";
   display: table;
}
.csSlideOuter .csPager.cSGallery:after {
   clear: both;
}
/* End of Gallery*/

/* slider actions */
.csAction > a {
   width: 32px;
   display: block;
   top: 50%;
   height: 32px;
   background-image: url('../img/controls.png');
   cursor: pointer;
   position: absolute;
   z-index: 99;
   margin-top: -16px;
   opacity: 0.5;
   -webkit-transition: opacity 0.35s linear 0s;
   transition: opacity 0.35s linear 0s;
}
.csAction > a:hover {
   opacity: 1;
}
.csAction > .csPrev {
left: 10px;
font-size: 30px;
color: #FFF;
background: #000;
text-align: center;

}
.csAction > .csNext {
font-size: 30px;
color: #FFF;
background: #000;
text-align: center;
   right: 10px;
}
.cS-hidden {
   height: 1px;
   opacity: 0;
   filter: alpha(opacity=0); 
   overflow: hidden;
}

ul{
  
  list-style-type: none;
}

.center {
max-width: 650px;
width: 100%;
margin: auto; 
display: block;
margin-top: 1rem;;
} 
h1 {color: #fff; font-size: 38px;
font-family: raleway;
text-transform: uppercase;
font-weight: 800;
font-size: 29px;
text-shadow: 3px 3px rgba(0, 0, 0, 0.25);
} 

#lightSlider {
padding: 0;
margin: 0 0 9px 0;
height: 450px !important;

}

#lightSlider li{
  height: 100% !important;

}

#lightSlider li img{
  height: 100% !important;
  width: 100% !important;
  background-repeat: no-repeat !important;
  background-size: cover !important;
  object-fit: contain !important;
}


   /*-----slider section end-----*/
/*--------tooltip start ----------*/

.custom-tooltip-wrapper {
text-transform: uppercase;
background: #ececec;
color: #555;
cursor: help;
font-family: "Gill Sans", Impact, sans-serif;
font-size: 20px;
/*margin: 100px 75px 10px 75px;
padding: 15px 20px;*/
position: relative;
text-align: center;
/*width: 200px;*/
-webkit-transform: translateZ(0); /* webkit flicker fix */
-webkit-font-smoothing: antialiased; /* webkit text rendering fix */
}

.custom-tooltip-wrapper .tooltip {
background: #e9414f;
bottom: 100%;
color: #fff;
display: block;
left: -40px;
font-size: 16px;
margin-bottom: 15px;
opacity: 0;
padding: 10px;
text-align: center;
border-radius: 5px 5px 0px 0px;
pointer-events: none;
position: absolute;
width: 130px;
-webkit-transform: translateY(10px);
  -moz-transform: translateY(10px);
  -ms-transform: translateY(10px);
   -o-transform: translateY(10px);
    transform: translateY(10px);
-webkit-transition: all .25s ease-out;
  -moz-transition: all .25s ease-out;
  -ms-transition: all .25s ease-out;
   -o-transition: all .25s ease-out;
    transition: all .25s ease-out;
-webkit-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
  -moz-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
  -ms-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
   -o-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
    box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.28);
}

/* This bridges the gap so you can mouse into the tooltip without it disappearing */
.custom-tooltip-wrapper .tooltip:before {
bottom: -20px;
content: " ";
display: block;
height: 20px;
left: 0;
position: absolute;
width: 100%;
}

/* CSS Triangles - see Trevor's post */
.custom-tooltip-wrapper .tooltip:after {
border-left: solid transparent 10px;
border-right: solid transparent 10px;
border-top: solid #e9414f 10px;
bottom: -10px;
content: " ";
height: 0;
left: 50%;
margin-left: -13px;
position: absolute;
width: 0;
}

.custom-tooltip-wrapper:hover .tooltip {
opacity: 1;
pointer-events: auto;
-webkit-transform: translateY(0px);
  -moz-transform: translateY(0px);
  -ms-transform: translateY(0px);
   -o-transform: translateY(0px);
    transform: translateY(0px);
}

/* IE can just show/hide with no transition */
.lte8 .custom-tooltip-wrapper .tooltip {
display: none;
}

.lte8 .custom-tooltip-wrapper:hover .tooltip {
display: block;
}
.custom-detail-page-slider{
  padding: 80px 0px !important;


}

.lSPager li{

  height: 100px !important;
  border-radius: 0px !important;
}

.lSPager li img{
  
  height: 100% !important;
  width: 100% !important;
  background-repeat: no-repeat !important;
  background-size: cover !important;
  object-fit: contain !important;
}


label {
  border: 1px solid #fff;
  padding: 10px;
  display: block;
  position: relative;
  margin: 10px;
  cursor: pointer;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

label::before {
  background-color: white;
  color: white;
  content: " ";
  display: block;
  border-radius: 50%;
  /*border: 1px solid grey;*/
  position: absolute;
  top: -5px;
  left: -5px;
  width: 25px;
  height: 25px;
  text-align: center;
  line-height: 28px;
  transition-duration: 0.4s;
  transform: scale(0);
}:checked+label {
  border-color: red;
}

:checked+label::before {
 content: "âœ“";
    background-color: #ff0000;
    transform: scale(1);
    z-index: 11111;
    color: #fff;
    font-size: 18px;
}

/*:checked+label img {
  transform: scale(0.9);
  box-shadow: 0 0 5px #333;
  z-index: -1;
}*/


.inumber-decrement:hover{
  color: red;
}
.number-increment:hover{
  color: red;
}

.custom-comment-class{

  width: 60px !important;
}
</style>

<section class=" "  style="padding: 174px 0 0;">
 
   <div class="container">
      <div class="row">
         <div class="col-lg-6">
            <div class="breadcrumb_iner">
               <div class="breadcrumb_iner_item">
               <!--  <h2><%= @product.print_description %></h2> -->
                  <p class="custom-link" style="background-color: #ecfdff;padding: 5px"><a href="/product_category?type=<%= @product.product_category.category.title %>"><%= @product.product_category.category.title %></a> <span>-</span> <a href="/product_category?type=<%= @product.product_category.category.title %>&category=<%= @product.product_category.title %>"><%= @product.product_category.title %></a> <span>-</span><span class="custom-reload"> <%= @product.print_description %></span></p>
               </div>
            </div>
         </div>
      </div>
   </div>
</section>
<!-- breadcrumb start-->
<!--================End Home Banner Area =================-->
<!--================Single Product Area =================-->
<div class="product_image_area section_padding  custom-detail-page-slider">
   <div class="container">
      <div class="row s_product_inner justify-content-between">
         <div class="col-lg-7 col-xl-7">


            <!-- slider section start -->
<div class="custom-slider-main-section" style="width:100%;">
<div class="center">
<ul id="lightSlider">
  <% if @product.images.present? %>
   <li data-thumb="<%= asset_path(url_for(@product.images.first)) %>"  class="zoom zoom-custom">
    <%= image_tag(url_for(@product.images.first), id: "imageresource", title: "Click to expand") %>
  </li> 
  <% else %>
    <!-- <li data-thumb="<%#= asset_path 'img/product/single-product/product_1.png' %>"> 
    <%#=image_tag("img/product/single-product/product_1.png")%>
  </li> -->
  <% end %>
  <% if @product.images.present? && @product.images.second.present? %>
    <li data-thumb="<%= asset_path(url_for(@product.images.second)) %>"  class="zoom1 zoom-custom"> 
    <%= image_tag(url_for(@product.images.second), id: "imageresource1", title: "Click to expand") %>
  </li>
  <% else %>
   <!--  <li data-thumb="<%#= asset_path 'img/product/single-product/product_1.png' %>"> 
    <%#=image_tag("img/product/single-product/product_1.png")%>
  </li> -->
  <% end %>
  <% if @product.images.present? && @product.images.third.present? %>
    <li data-thumb="<%= asset_path(url_for(@product.images.third)) %>"  class="zoom2 zoom-custom"> 
    <%= image_tag(url_for(@product.images.third), id: "imageresource2", title: "Click to expand") %>
  </li>
  <% else %>
   <!--  <li data-thumb="<%#= asset_path 'img/product/single-product/product_1.png' %>"> 
    <%#=image_tag("img/product/single-product/product_1.png")%>
  </li> -->
  <% end %>
  <% if @product.images.present? && @product.images.fourth.present? %>
    <li data-thumb="<%= asset_path(url_for(@product.images.fourth)) %>"  class="zoom3 zoom-custom"> 
    <%= image_tag(url_for(@product.images.fourth), id: "imageresource3", title: "Click to expand") %>
  </li>
  <% else %>
    <!-- <li data-thumb="<%#= asset_path 'img/product/single-product/product_1.png' %>"> 
    <%#=image_tag("img/product/single-product/product_1.png")%>
  </li> -->
  <% end %>
  <% if @product.images.present? && @product.images.fifth.present? %>
    <li data-thumb="<%= asset_path(url_for(@product.images.fifth)) %>"  class="zoom4 zoom-custom"> 
    <%= image_tag(url_for(@product.images.fifth), id: "imageresource4", title: "Click to expand") %>
  </li>
  <% else %>
    <!-- <li data-thumb="<%#= asset_path 'img/product/single-product/product_1.png' %>"> 
    <%#=image_tag("img/product/single-product/product_1.png")%> -->
  <!-- </li> -->
  <% end %>
  <% if @product.images.count >= 6 %>
    <li data-thumb="<%= asset_path(url_for(@product.images.first(6).last)) %>"  class="zoom5 zoom-custom"> 
    <%= image_tag(url_for(@product.images.first(6).last), id: "imageresource5", title: "Click to expand") %>
  </li>
  <% else %>
    <!-- <li data-thumb="<%#= asset_path 'img/product/single-product/product_1.png' %>"> 
    <%#=image_tag("img/product/single-product/product_1.png")%> -->
  <!-- </li> -->
  <% end %>
  <% if @product.images.count >= 7 %>
    <li data-thumb="<%= asset_path(url_for(@product.images.first(7).last)) %>"  class="zoom6 zoom-custom"> 
    <%= image_tag(url_for(@product.images.first(7).last), id: "imageresource6", title: "Click to expand") %>
  </li>
  <% else %>
    <!-- <li data-thumb="<%#= asset_path 'img/product/single-product/product_1.png' %>"> 
    <%#=image_tag("img/product/single-product/product_1.png")%> -->
  <!-- </li> -->
  <% end %>
  <% if @product.images.count >= 8 %>
    <li data-thumb="<%= asset_path(url_for(@product.images.first(8).last)) %>"  class="zoom7 zoom-custom"> 
    <%= image_tag(url_for(@product.images.first(8).last), id: "imageresource7", title: "Click to expand") %>
  </li>
  <% else %>
    <!-- <li data-thumb="<%#= asset_path 'img/product/single-product/product_1.png' %>"> 
    <%#=image_tag("img/product/single-product/product_1.png")%> -->
  <!-- </li> -->
  <% end %>
  <% if @product.images.count >= 9 %>
    <li data-thumb="<%= asset_path(url_for(@product.images.first(9).last)) %>"  class="zoom8 zoom-custom"> 
    <%= image_tag(url_for(@product.images.first(9).last), id: "imageresource8", title: "Click to expand") %>
  </li>
  <% else %>
    <!-- <li data-thumb="<%#= asset_path 'img/product/single-product/product_1.png' %>"> 
    <%#=image_tag("img/product/single-product/product_1.png")%> -->
  <!-- </li> -->
  <% end %>
  <% if @product.images.count >= 10 %>
    <li data-thumb="<%= asset_path(url_for(@product.images.first(10).last)) %>"  class="zoom9 zoom-custom"> 
    <%= image_tag(url_for(@product.images.first(10).last), id: "imageresource9", title: "Click to expand") %>
  </li>
  <% else %>
    <!-- <li data-thumb="<%#= asset_path 'img/product/single-product/product_1.png' %>"> 
    <%#=image_tag("img/product/single-product/product_1.png")%> -->
  <!-- </li> -->
  <% end %>

   
</ul>
  
  </div> 
</div>

         </div>
         <div class="col-lg-5 col-xl-4">
            <div class="s_product_text">
               <h3><%= @product.print_description %></h3>
               <span><%= @product.code %></span>
               <h2>R <%= @product.price.to_i %></h2>
               <ul class="list">
                  <li>
                     <span>Category</span> <span  style="padding-left: 51px;"></span>
                     <a href="/product_category?type=<%= @product.product_category.category.title %>&category=<%= @product.product_category.title %>"><%= @product.product_category.title %></a>
                  </li>
                  <li>
                     <span style="padding-right: 46px;">Availability</span><span id="stock-status" style="color: #e9414f"><%= @product.product_colors.pluck(:inventory).sum(&:to_i) > 0 ? "In Stock" : "Supplier Out of Stock" %></span> 
                  </li>
                  <li>
                     <span style="padding-right: 58px;margin: 10px auto">Delivery </span><span id="stock-remaining" style="color: #e9414f"><%= @product.product_colors.pluck(:inventory).sum(&:to_i) > 0 ? "3 days" : "Within 21 working days" %></span>
                  </li>
                  <li>
                     <span style="padding-right: 45px;">Assembly</span> <%= @product.assembly_type.humanize.upcase if @product.assembly_type.present? %>
                  </li>
                  <% if @product.assembly_type == "free_assembly" %>
                    <li style="margin-left: 33%;"><span style="color: red;">within 7 working  days from delivery</span></li>
                  <% end %>
                  <li>
                     <div style="display:inline-flex; ">

                     <span>Share</span>
                     <span  style="padding-left: 81px;">
                     <%= link_to "javascript:void(0);", class: 'share-on-facebook', data: { id: @product.id, type: 'facebook', attributes: product_attributes(@product) } do %>
                     
                     <i class="fab fa-facebook-f" style="font-size: 21px;color: #3b5998;"></i>
                    
                     <% end %>
                     <a class="share-on-pinterest" data-id="139" data-type="pinterest" data-attributes="{&quot;id&quot;:139,&quot;title&quot;:&quot;Stella&quot;,&quot;file_name&quot;:&quot;http://test.fairprice.co.za/rails/active_storage/blobs/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBYTA9IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--27992457c8d0b4049dd272005110caab475d1ac8/banner_img.png&quot;}" href="javascript:void(0);">
                     
                     <i class="fa fa-pinterest
                        " style="font-size: 21px;color: #ee1c21;"></i>
                     
                     </a>
                     <a class="share-on-twitter" data-id="139" data-type="twitter" data-attributes="{&quot;id&quot;:139,&quot;title&quot;:&quot;Stella&quot;,&quot;file_name&quot;:&quot;http://test.fairprice.co.za/rails/active_storage/blobs/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBYTA9IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--27992457c8d0b4049dd272005110caab475d1ac8/banner_img.png&quot;}" href="javascript:void(0);">
                    
                     <i class="fa fa-twitter-square
                        " style="font-size: 21px;color: #1ea1f1;"></i>
                     
                     </a>

                     <a style="cursor: pointer;">
                     
                     <i class="fa fa-whatsapp" style="font-size: 21px;color:#4FCE5D">
                     </i>
                     
                     </a>
                  </div>


                  </li>
                    
                  <li style="display: inline-flex; vertical-align: middle;">
                     <span style="margin-top: 12px">Color</span>        <span  style="padding-left: 57px;"></span>
                     <div class="custom_radio_btn_tab">
                        <div class="form-check">
                           <div class="custom-radio-tabs">
                              <% @product.colors.each do |color| %>
                                <%# if color.image.present? %>
                                <input id="<%= color.id %>" type="radio" class="form-check-input custom-radio-tab" name=" " checked="">
                                <label for="<%= color.id %>" class="radio-inline" id="radio-<%= color.id %>" value="<%= color.id %>">
                                   <div class="custom_img_picker custom-tooltip-wrapper">

                                      <% if color.image.present? %>
                                      <%= image_tag(url_for(color.image), width: '100%') %>
                                      <div class="tooltip"><%= color.title %></div>

                                       
                                      <% else %>

                                      <%=image_tag("img/trans-color.png", width: '100%') %>
                                      <div class="tooltip"><%= color.title %></div>

                                      <% end %>

                                   </div>
                                  <!--  <%= color.title %> -->
                                </label>
                                <%# end %>

                                <script type="text/javascript">
                                   $('#radio-<%= color.id %>').on('click', function(e){
                                      id = $(this).attr('for');
                                       $.ajax({
                                         headers: { 'X-CSRF-Token': Rails.csrfToken() },
                                         url:'/admin/colors/' + id + '/inventory?product_id=<%= @product.id %>',
                                         type:'get',
                                           success:function (data) {
                                            $('#stock-remaining').text(data.message);
                                            if (data.message == "3 days") {
                                              $('#stock-status').text("In Stock");
                                            }
                                            else{
                                              $('#stock-status').text("Supplier Out of Stock");
                                            }
                                           }
                                        });
                                    });
                                </script>
                              <% end %>
                           </div>
                        </div>
                     </div>
                  </li>
               </ul>
               <p>
                  <%= @product.description %>
               </p>
               <div class="card_area d-flex justify-content-between align-items-center">
                  <div class="product_count">
                     <span class="inumber-decrement" title="decrement"> <i class="fa fa-minus"></i></span>
                     <input class="input-number" type="text" value="1" min="1" max="200" onkeypress='validate(event)' >
                     <span class="number-increment" title="increment"> <i class="fa fa-plus"></i></span>
                  </div>
                  <%#= link_to add_to_cart_product_path(@product.id), class: "btn_3", method: :post do %>
                  <!-- add to cart -->
                  <%# end %>
                  <a id="add-to-cart" class="btn_3" style="cursor: pointer;color: white;">add to cart</a>
                  <!-- <a href="/cart" class="btn_3">add to cart</a> -->
                  <% if current_user.present? %>
                    <% if @product.likes.where(user_id: current_user.id).present? %>
                      <a class="like_us_2"> <i class="fa fa-heart" id="product-like" style="font-size: 21px;" title="favourite"></i> </a>
                    <% else %>
                      <a class="like_us_1"> <i class="fa fa-heart-o" id="product-like" title="favourite"></i> </a>
                    <% end %>
                  <% end %>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>
<!--================End Single Product Area =================-->
<div style="display: none">
   <%= form_for Like.new, remote: true do |f| %>
   <div class="form-group">
      <%= f.hidden_field(:parent_id, value: @product.id ) %>
      <%= f.hidden_field(:parent_type, value: Like.parent_type_product ) %>
      <%= f.hidden_field(:value, value: true ) %>
      <%= f.submit 'Like Project', :class => 'btn btn-main', :id => 'like-button' %>
      <% end %>
   </div>
</div>
<!--================Product Description Area =================-->
<section class="product_description_area">
   <div class="container">
   <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item">
         <a class="nav-link active" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile"
            aria-selected="false">Specifications</a>
      </li>
      <li class="nav-item">
         <a class="nav-link" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
            aria-selected="true">Description</a>
      </li>
      <li class="nav-item">
         <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact"
            aria-selected="false">Comments</a>
      </li>
      <li class="nav-item">
         <a class="nav-link" id="review-tab" data-toggle="tab" href="#review" role="tab" aria-controls="review"
            aria-selected="false">Reviews</a>
      </li>
   </ul>
   <div class="tab-content" id="myTabContent">
      <div id="profile" role="tabpanel" aria-labelledby="profile-tab">
         <div class="table-responsive">
            <table class="table">
               <tbody>
                  <tr>
                     <td>
                        <h5>Width</h5>
                     </td>
                     <td>
                        <h5><%= @product.width %></h5>
                     </td>
                  </tr>
                  <tr>
                     <td>
                        <h5>Height</h5>
                     </td>
                     <td>
                        <h5><%= @product.height %></h5>
                     </td>
                  </tr>
                  <tr>
                     <td>
                        <h5>Length</h5>
                     </td>
                     <td>
                        <h5><%= @product.length %></h5>
                     </td>
                  </tr>
                  <!-- <tr>
                     <td>
                        <h5>Assembly Type</h5>
                     </td>
                     <td>
                        <h5><%= @product.assembly_type.humanize if @product.assembly_type.present? %></h5>
                     </td>
                  </tr> -->
               <!--    <tr>
                     <td>
                        <h5>Inventory</h5>
                     </td>
                     <td>
                        <h5><%#= @product.inventory.to_i > 0 ? "In Stock" : "Out of Stock" %></h5>
                     </td>
                  </tr> -->
<!--                   <tr>
                     <td>
                        <h5>Warranty</h5>
                     </td>
                     <td>
                        <h5><%#= @product.warranty == true ? "Yes" : "No" %></h5>
                     </td>
                  </tr> -->
                  <!-- <tr>
                     <td>
                       <h5>Clean and Care</h5>
                     </td>
                     <td>
                       <h5><%#= @product.clean_and_care == true ? "Yes" : "No" %></h5>
                     </td>
                     </tr> -->
               </tbody>
            </table>
         </div>
      </div>
      <div id="home" role="tabpanel" aria-labelledby="home-tab" style="display: none">
         <p>
            <%= @product.description %>
         </p>
         <p>
      </div>
      <div id="contact" role="tabpanel" aria-labelledby="contact-tab" style="display: none">
         <div class="row">
            <div class="col-lg-6">
               <div class="comment_list">
                  <% unless @product.comments.present? %>
                  <div id="pre-comment">
                  </div>
                  <% end %>
                  <% @product.comments.order(id: :desc).each do |comment| %>
                  <div class="review_item" id="pre-comment">
                     <div class="media">
                        <div class="d-flex">
                           <%=image_tag "img/product/single-product/dummy1.png", class: 'custom-comment-class'%>
                        </div>
                        <div class="media-body">
                           <h4><%= comment.commentor_full_name %></h4>
                           <h5><%= comment.created_at.strftime("%b %d, %Y %I:%M %P") %></h5>
                           <!-- <a class="reply_btn" href="#">Reply</a> -->
                        </div>
                     </div>
                     <p>
                        <%= comment.statement %>
                     </p>
                  </div>
                  <% end %>
               </div>
            </div>
            <div class="col-lg-6">
               <div class="review_box">
                  <h4>Post a comment</h4>
                  <%= form_for Comment.new, remote: true do |f| %>
                  <!-- <form class="row contact_form" action="contact_process.php" method="post" id="contactForm"
                     novalidate="novalidate"> -->
                  <div class="col-md-12">
                     <div class="form-group">
                        <%= f.text_field(:commentor_full_name, :class => 'form-control', placeholder: "Full Name", :required => true) %>
                     </div>
                  </div>
                  <div class="col-md-12">
                     <div class="form-group">
                        <%= f.text_field(:commentor_email_address, :class => 'form-control', placeholder: "Email Address", :required => true) %>
                     </div>
                  </div>
                  <div class="col-md-12">
                     <div class="form-group">
                        <%= f.text_field(:commentor_phone_number, :class => 'form-control', placeholder: "Phone Number", :required => true) %>
                     </div>
                  </div>
                  <div class="col-md-12">
                     <div class="form-group">
                        <%= f.text_area(:statement, size: '70x10', :class => 'form-control', placeholder: "Message", :required => true) %>
                        <%= f.hidden_field(:parent_id, value: @product.id , :id => "comment_area") %>
                        <%= f.hidden_field(:parent_type, value: Comment.parent_type_product ) %>
                     </div>
                  </div>
                  <div class="col-md-12 text-right">
                     <button type="submit" value="submit" class="btn_3">
                     Submit Now
                     </button>
                  </div>
                  <% end %>
               </div>
            </div>
         </div>
      </div>
      <div class="" id="review" role="tabpanel" aria-labelledby="review-tab" style="display: none">
         <div class="rate-box">
            <strong>Rate this Product</strong>
            <div id="rateYo"></div>
         </div>
         <br>
         <br>
         <div class="row">
            <div class="col-lg-6">
               <div class="row total_rate">
                  <div class="col-6">
                     <div class="box_total">
                        <h5>Overall</h5>
                        <h4 id="avg-ratting"><%= @avg_rating.present? ? @avg_rating : 0.0 %></h4>
                        <h6>(<span id="review-count"><%= @product.ratings.count %></span> Reviews)</h6>
                     </div>
                  </div>
                  <!--              <div class="col-6">
                     <div class="rating_list">
                       <h3>Based on 3 Reviews</h3>
                       <ul class="list">
                         <li>
                           <a href="#">5 Star
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i> 01</a>
                         </li>
                         <li>
                           <a href="#">4 Star
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i> 01</a>
                         </li>
                         <li>
                           <a href="#">3 Star
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i> 01</a>
                         </li>
                         <li>
                           <a href="#">2 Star
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i> 01</a>
                         </li>
                         <li>
                           <a href="#">1 Star
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i>
                             <i class="fa fa-star"></i> 01</a>
                         </li>
                       </ul>
                     </div>
                     </div>
                     </div>
                     <div class="review_list">
                     <div class="review_item">
                     <div class="media">
                       <div class="d-flex">
                         <img src="img/product/single-product/review-1.png" alt="" />
                       </div>
                       <div class="media-body">
                         <h4>Blake Ruiz</h4>
                         <i class="fa fa-star"></i>
                         <i class="fa fa-star"></i>
                         <i class="fa fa-star"></i>
                         <i class="fa fa-star"></i>
                         <i class="fa fa-star"></i>
                       </div>
                     </div>
                     <p>
                       Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                       sed do eiusmod tempor incididunt ut labore et dolore magna
                       aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                       ullamco laboris nisi ut aliquip ex ea commodo
                     </p>
                     </div>
                     <div class="review_item">
                     <div class="media">
                       <div class="d-flex">
                         <img src="img/product/single-product/review-2.png" alt="" />
                       </div>
                       <div class="media-body">
                         <h4>Blake Ruiz</h4>
                         <i class="fa fa-star"></i>
                         <i class="fa fa-star"></i>
                         <i class="fa fa-star"></i>
                         <i class="fa fa-star"></i>
                         <i class="fa fa-star"></i>
                       </div>
                     </div>
                     <p>
                       Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                       sed do eiusmod tempor incididunt ut labore et dolore magna
                       aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                       ullamco laboris nisi ut aliquip ex ea commodo
                     </p>
                     </div>
                     <div class="review_item">
                     <div class="media">
                       <div class="d-flex">
                         <img src="img/product/single-product/review-3.png" alt="" />
                       </div>
                       <div class="media-body">
                         <h4>Blake Ruiz</h4>
                         <i class="fa fa-star"></i>
                         <i class="fa fa-star"></i>
                         <i class="fa fa-star"></i>
                         <i class="fa fa-star"></i>
                         <i class="fa fa-star"></i>
                       </div>
                     </div>
                     <p>
                       Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                       sed do eiusmod tempor incididunt ut labore et dolore magna
                       aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                       ullamco laboris nisi ut aliquip ex ea commodo
                     </p>
                     </div>
                     </div> -->
               </div>
               <!--  <div class="col-lg-6">
                  <div class="review_box">
                    <h4>Add a Review</h4>
                    <p>Your Rating:</p>
                    <ul class="list">
                      <li>
                        <a href="#">
                          <i class="fa fa-star"></i>
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <i class="fa fa-star"></i>
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <i class="fa fa-star"></i>
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <i class="fa fa-star"></i>
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <i class="fa fa-star"></i>
                        </a>
                      </li>
                    </ul>
                    <p>Outstanding</p>
                    <form class="row contact_form" action="contact_process.php" method="post" novalidate="novalidate">
                      <div class="col-md-12">
                        <div class="form-group">
                          <input type="text" class="form-control" name="name" placeholder="Your Full name" />
                        </div>
                      </div>
                      <div class="col-md-12">
                        <div class="form-group">
                          <input type="email" class="form-control" name="email" placeholder="Email Address" />
                        </div>
                      </div>
                      <div class="col-md-12">
                        <div class="form-group">
                          <input type="text" class="form-control" name="number" placeholder="Phone Number" />
                        </div>
                      </div>
                      <div class="col-md-12">
                        <div class="form-group">
                          <textarea class="form-control" name="message" rows="1" placeholder="Review"></textarea>
                        </div>
                      </div>
                      <div class="col-md-12 text-right">
                        <button type="submit" value="submit" class="btn_3">
                          Submit Now
                        </button>
                      </div>
                    </form>
                  </div>
                  </div> -->
            </div>
         </div>
      </div>
   </div>
</section>
<!--================End Product Description Area =================-->
<!-- product_list part start-->
<section class="product_list best_seller">
   <div class="container">
      <div class="row justify-content-center">
         <div class="col-lg-12">
            <div class="section_tittle text-center">
               <h2>Related Products</h2>
            </div>
         </div>
      </div>
      <div class="row align-items-center justify-content-between">
         <div class="col-lg-12">
            <div class="best_product_slider owl-carousel">
               <% @best_seller_products.each do |product| %>
               <div class="single_product_item">
                  <div class="cutome-img-size">
                     <%= link_to "/products/#{product.id}" do %>
                        <% if product.images.present? && product.images.first.variable? %>
                          <img src="<%= url_for(product.images.first.variant(resize: '200x200')) %>">
                        <% else %>
                          <img src="<%= url_for(product.images.first) %>">
                        <% end %>
                     <% end %>
                  </div>
                  <div class="single_product_text">
                     <%= link_to "/products/#{product.id}" do %>
                     <h4><%= product.print_description %></h4>
                     <% end %>
                     <h3> <span style="color: #e9414f; font-weight: 500"> R  
                       <%= product.price.to_i %> </span></h3>
                       <%= link_to product_path(product.id), class: "add_cart", method: :get do %>
                     + add to cart 
                     <!-- <i class="fa fa-heart-o"></i> -->
                     <% end %>
                  </div>
               </div>
               <% end %>
            </div>
         </div>
      </div>
   </div>
</section>
<!-- product_list part end-->
<% image = "img/product/single-product/dummy1.png" %>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-zoom/1.7.21/jquery.zoom.min.js" integrity="sha512-m5kAjE5cCBN5pwlVFi4ABsZgnLuKPEx0fOnzaH5v64Zi3wKnhesNUYq4yKmHQyTa3gmkR6YeSKW1S+siMvgWtQ==" crossorigin="anonymous"></script> -->
<!-- Creates the bootstrap modal where the image will appear -->
<div class="modal fade" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
         <div class="modal-header" style="height: 0px;">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
         </div>
         <div class="modal-body">
            <img src="" id="imagepreview" style="width: 100%; padding: 3px; height: auto;" >
         </div>
      </div>
   </div>
</div>
<div class="custom-color-label" style="display: none" value = "">
</div>
<div class="modal" id="add_to_cart_modal" style="align-items: center;">
   <div class="modal-dialog">
      <div class="modal-content">
         <!-- Modal Header -->
         <div class="modal-header">
            <h4 class="modal-title" >Product Added to cart</h4>
            <button type="button" class="close close_1" data-dismiss="modal">&times;</button>
         </div>
         <!-- Modal body -->
         <div class="modal-body" style="display: inline-flex;">
            <br>
            <br>
            <div class="checkout_btn_inner float-right">
               <a  class="btn_1 checkout_btn_2" href="" style="margin-left: 20px;">Shop More</a>
            </div>
            <div class="checkout_btn_inner float-right">
               <a  class="btn_1 checkout_btn_1" href="/cart">Go to Cart</a>
            </div>
         </div>
      </div>
   </div>
</div>
<% if flash[:add_to_cart] %>
<script type="text/javascript">
   $('#add_to_cart_modal').modal('show');
</script>
<% end  %>

<!-- slider js start -->
<script type="text/javascript">

  $('.radio-inline').last().click();

  setTimeout(function (){
    $('.radio-inline').last().click();
  }, 300);
   /*! lightslider - v1.1.5 - 2015-10-31
* https://github.com/sachinchoolur/lightslider
* Copyright (c) 2015 Sachin N; Licensed MIT */
(function ($, undefined) {
    'use strict';
    var defaults = {
        item: 3,
        autoWidth: false,
        slideMove: 1,
        slideMargin: 10,
        addClass: '',
        mode: 'slide',
        useCSS: true,
        cssEasing: 'ease', //'cubic-bezier(0.25, 0, 0.25, 1)',
        easing: 'linear', //'for jquery animation',//
        speed: 400, //ms'
        auto: false,
        pauseOnHover: false,
        loop: false,
        slideEndAnimation: true,
        pause: 2000,
        keyPress: false,
        controls: true,
        prevHtml: '',
        nextHtml: '',
        rtl: false,
        adaptiveHeight: false,
        vertical: false,
        verticalHeight: 500,
        vThumbWidth: 100,
        thumbItem: 10,
        pager: true,
        gallery: false,
        galleryMargin: 5,
        thumbMargin: 5,
        currentPagerPosition: 'middle',
        enableTouch: true,
        enableDrag: true,
        freeMove: true,
        swipeThreshold: 40,
        responsive: [],
        /* jshint ignore:start */
        onBeforeStart: function ($el) {},
        onSliderLoad: function ($el) {},
        onBeforeSlide: function ($el, scene) {},
        onAfterSlide: function ($el, scene) {},
        onBeforeNextSlide: function ($el, scene) {},
        onBeforePrevSlide: function ($el, scene) {}
        /* jshint ignore:end */
    };
    $.fn.lightSlider = function (options) {
        if (this.length === 0) {
            return this;
        }

        if (this.length > 1) {
            this.each(function () {
                $(this).lightSlider(options);
            });
            return this;
        }

        var plugin = {},
            settings = $.extend(true, {}, defaults, options),
            settingsTemp = {},
            $el = this;
        plugin.$el = this;

        if (settings.mode === 'fade') {
            settings.vertical = false;
        }
        var $children = $el.children(),
            windowW = $(window).width(),
            breakpoint = null,
            resposiveObj = null,
            length = 0,
            w = 0,
            on = false,
            elSize = 0,
            $slide = '',
            scene = 0,
            property = (settings.vertical === true) ? 'height' : 'width',
            gutter = (settings.vertical === true) ? 'margin-bottom' : 'margin-right',
            slideValue = 0,
            pagerWidth = 0,
            slideWidth = 0,
            thumbWidth = 0,
            interval = null,
            isTouch = ('ontouchstart' in document.documentElement);
        var refresh = {};

        refresh.chbreakpoint = function () {
            windowW = $(window).width();
            if (settings.responsive.length) {
                var item;
                if (settings.autoWidth === false) {
                    item = settings.item;
                }
                if (windowW < settings.responsive[0].breakpoint) {
                    for (var i = 0; i < settings.responsive.length; i++) {
                        if (windowW < settings.responsive[i].breakpoint) {
                            breakpoint = settings.responsive[i].breakpoint;
                            resposiveObj = settings.responsive[i];
                        }
                    }
                }
                if (typeof resposiveObj !== 'undefined' && resposiveObj !== null) {
                    for (var j in resposiveObj.settings) {
                        if (resposiveObj.settings.hasOwnProperty(j)) {
                            if (typeof settingsTemp[j] === 'undefined' || settingsTemp[j] === null) {
                                settingsTemp[j] = settings[j];
                            }
                            settings[j] = resposiveObj.settings[j];
                        }
                    }
                }
                if (!$.isEmptyObject(settingsTemp) && windowW > settings.responsive[0].breakpoint) {
                    for (var k in settingsTemp) {
                        if (settingsTemp.hasOwnProperty(k)) {
                            settings[k] = settingsTemp[k];
                        }
                    }
                }
                if (settings.autoWidth === false) {
                    if (slideValue > 0 && slideWidth > 0) {
                        if (item !== settings.item) {
                            scene = Math.round(slideValue / ((slideWidth + settings.slideMargin) * settings.slideMove));
                        }
                    }
                }
            }
        };

        refresh.calSW = function () {
            if (settings.autoWidth === false) {
                slideWidth = (elSize - ((settings.item * (settings.slideMargin)) - settings.slideMargin)) / settings.item;
            }
        };

        refresh.calWidth = function (cln) {
            var ln = cln === true ? $slide.find('.lslide').length : $children.length;
            if (settings.autoWidth === false) {
                w = ln * (slideWidth + settings.slideMargin);
            } else {
                w = 0;
                for (var i = 0; i < ln; i++) {
                    w += (parseInt($children.eq(i).width()) + settings.slideMargin);
                }
            }
            return w;
        };
        plugin = {
            doCss: function () {
                var support = function () {
                    var transition = ['transition', 'MozTransition', 'WebkitTransition', 'OTransition', 'msTransition', 'KhtmlTransition'];
                    var root = document.documentElement;
                    for (var i = 0; i < transition.length; i++) {
                        if (transition[i] in root.style) {
                            return true;
                        }
                    }
                };
                if (settings.useCSS && support()) {
                    return true;
                }
                return false;
            },
            keyPress: function () {
                if (settings.keyPress) {
                    $(document).on('keyup.lightslider', function (e) {
                        if (!$(':focus').is('input, textarea')) {
                            if (e.preventDefault) {
                                e.preventDefault();
                            } else {
                                e.returnValue = false;
                            }
                            if (e.keyCode === 37) {
                                $el.goToPrevSlide();
                            } else if (e.keyCode === 39) {
                                $el.goToNextSlide();
                            }
                        }
                    });
                }
            },
            controls: function () {
                if (settings.controls) {
                    $el.after('<div class="lSAction"><a class="lSPrev">' + settings.prevHtml + '</a><a class="lSNext">' + settings.nextHtml + '</a></div>');
                    if (!settings.autoWidth) {
                        if (length <= settings.item) {
                            $slide.find('.lSAction').hide();
                        }
                    } else {
                        if (refresh.calWidth(false) < elSize) {
                            $slide.find('.lSAction').hide();
                        }
                    }
                    $slide.find('.lSAction a').on('click', function (e) {
                        if (e.preventDefault) {
                            e.preventDefault();
                        } else {
                            e.returnValue = false;
                        }
                        if ($(this).attr('class') === 'lSPrev') {
                            $el.goToPrevSlide();
                        } else {
                            $el.goToNextSlide();
                        }
                        return false;
                    });
                }
            },
            initialStyle: function () {
                var $this = this;
                if (settings.mode === 'fade') {
                    settings.autoWidth = false;
                    settings.slideEndAnimation = false;
                }
                if (settings.auto) {
                    settings.slideEndAnimation = false;
                }
                if (settings.autoWidth) {
                    settings.slideMove = 1;
                    settings.item = 1;
                }
                if (settings.loop) {
                    settings.slideMove = 1;
                    settings.freeMove = false;
                }
                settings.onBeforeStart.call(this, $el);
                refresh.chbreakpoint();
                $el.addClass('lightSlider').wrap('<div class="lSSlideOuter ' + settings.addClass + '"><div class="lSSlideWrapper"></div></div>');
                $slide = $el.parent('.lSSlideWrapper');
                if (settings.rtl === true) {
                    $slide.parent().addClass('lSrtl');
                }
                if (settings.vertical) {
                    $slide.parent().addClass('vertical');
                    elSize = settings.verticalHeight;
                    $slide.css('height', elSize + 'px');
                } else {
                    elSize = $el.outerWidth();
                }
                $children.addClass('lslide');
                if (settings.loop === true && settings.mode === 'slide') {
                    refresh.calSW();
                    refresh.clone = function () {
                        if (refresh.calWidth(true) > elSize) {
                            /**/
                            var tWr = 0,
                                tI = 0;
                            for (var k = 0; k < $children.length; k++) {
                                tWr += (parseInt($el.find('.lslide').eq(k).width()) + settings.slideMargin);
                                tI++;
                                if (tWr >= (elSize + settings.slideMargin)) {
                                    break;
                                }
                            }
                            var tItem = settings.autoWidth === true ? tI : settings.item;

                            /**/
                            if (tItem < $el.find('.clone.left').length) {
                                for (var i = 0; i < $el.find('.clone.left').length - tItem; i++) {
                                    $children.eq(i).remove();
                                }
                            }
                            if (tItem < $el.find('.clone.right').length) {
                                for (var j = $children.length - 1; j > ($children.length - 1 - $el.find('.clone.right').length); j--) {
                                    scene--;
                                    $children.eq(j).remove();
                                }
                            }
                            /**/
                            for (var n = $el.find('.clone.right').length; n < tItem; n++) {
                                $el.find('.lslide').eq(n).clone().removeClass('lslide').addClass('clone right').appendTo($el);
                                scene++;
                            }
                            for (var m = $el.find('.lslide').length - $el.find('.clone.left').length; m > ($el.find('.lslide').length - tItem); m--) {
                                $el.find('.lslide').eq(m - 1).clone().removeClass('lslide').addClass('clone left').prependTo($el);
                            }
                            $children = $el.children();
                        } else {
                            if ($children.hasClass('clone')) {
                                $el.find('.clone').remove();
                                $this.move($el, 0);
                            }
                        }
                    };
                    refresh.clone();
                }
                refresh.sSW = function () {
                    length = $children.length;
                    if (settings.rtl === true && settings.vertical === false) {
                        gutter = 'margin-left';
                    }
                    if (settings.autoWidth === false) {
                        $children.css(property, slideWidth + 'px');
                    }
                    $children.css(gutter, settings.slideMargin + 'px');
                    w = refresh.calWidth(false);
                    $el.css(property, w + 'px');
                    if (settings.loop === true && settings.mode === 'slide') {
                        if (on === false) {
                            scene = $el.find('.clone.left').length;
                        }
                    }
                };
                refresh.calL = function () {
                    $children = $el.children();
                    length = $children.length;
                };
                if (this.doCss()) {
                    $slide.addClass('usingCss');
                }
                refresh.calL();
                if (settings.mode === 'slide') {
                    refresh.calSW();
                    refresh.sSW();
                    if (settings.loop === true) {
                        slideValue = $this.slideValue();
                        this.move($el, slideValue);
                    }
                    if (settings.vertical === false) {
                        this.setHeight($el, false);
                    }

                } else {
                    this.setHeight($el, true);
                    $el.addClass('lSFade');
                    if (!this.doCss()) {
                        $children.fadeOut(0);
                        $children.eq(scene).fadeIn(0);
                    }
                }
                if (settings.loop === true && settings.mode === 'slide') {
                    $children.eq(scene).addClass('active');
                } else {
                    $children.first().addClass('active');
                }
            },
            pager: function () {
                var $this = this;
                refresh.createPager = function () {
                    thumbWidth = (elSize - ((settings.thumbItem * (settings.thumbMargin)) - settings.thumbMargin)) / settings.thumbItem;
                    var $children = $slide.find('.lslide');
                    var length = $slide.find('.lslide').length;
                    var i = 0,
                        pagers = '',
                        v = 0;
                    for (i = 0; i < length; i++) {
                        if (settings.mode === 'slide') {
                            // calculate scene * slide value
                            if (!settings.autoWidth) {
                                v = i * ((slideWidth + settings.slideMargin) * settings.slideMove);
                            } else {
                                v += ((parseInt($children.eq(i).width()) + settings.slideMargin) * settings.slideMove);
                            }
                        }
                        var thumb = $children.eq(i * settings.slideMove).attr('data-thumb');
                        if (settings.gallery === true) {
                            pagers += '<li style="width:100%;' + property + ':' + thumbWidth + 'px;' + gutter + ':' + settings.thumbMargin + 'px"><a href="#"><img src="' + thumb + '" /></a></li>';
                        } else {
                            pagers += '<li><a href="#">' + (i + 1) + '</a></li>';
                        }
                        if (settings.mode === 'slide') {
                            if ((v) >= w - elSize - settings.slideMargin) {
                                i = i + 1;
                                var minPgr = 2;
                                if (settings.autoWidth) {
                                    pagers += '<li><a href="#">' + (i + 1) + '</a></li>';
                                    minPgr = 1;
                                }
                                if (i < minPgr) {
                                    pagers = null;
                                    $slide.parent().addClass('noPager');
                                } else {
                                    $slide.parent().removeClass('noPager');
                                }
                                break;
                            }
                        }
                    }
                    var $cSouter = $slide.parent();
                    $cSouter.find('.lSPager').html(pagers); 
                    if (settings.gallery === true) {
                        if (settings.vertical === true) {
                            // set Gallery thumbnail width
                            $cSouter.find('.lSPager').css('width', settings.vThumbWidth + 'px');
                        }
                        pagerWidth = (i * (settings.thumbMargin + thumbWidth)) + 0.5;
                        $cSouter.find('.lSPager').css({
                            property: pagerWidth + 'px',
                            'transition-duration': settings.speed + 'ms'
                        });
                        if (settings.vertical === true) {
                            $slide.parent().css('padding-right', (settings.vThumbWidth + settings.galleryMargin) + 'px');
                        }
                        $cSouter.find('.lSPager').css(property, pagerWidth + 'px');
                    }
                    var $pager = $cSouter.find('.lSPager').find('li');
                    $pager.first().addClass('active');
                    $pager.on('click', function () {
                        if (settings.loop === true && settings.mode === 'slide') {
                            scene = scene + ($pager.index(this) - $cSouter.find('.lSPager').find('li.active').index());
                        } else {
                            scene = $pager.index(this);
                        }
                        $el.mode(false);
                        if (settings.gallery === true) {
                            $this.slideThumb();
                        }
                        return false;
                    });
                };
                if (settings.pager) {
                    var cl = 'lSpg';
                    if (settings.gallery) {
                        cl = 'lSGallery';
                    }
                    $slide.after('<ul class="lSPager ' + cl + '"></ul>');
                    var gMargin = (settings.vertical) ? 'margin-left' : 'margin-top';
                    $slide.parent().find('.lSPager').css(gMargin, settings.galleryMargin + 'px');
                    refresh.createPager();
                }

                setTimeout(function () {
                    refresh.init();
                }, 0);
            },
            setHeight: function (ob, fade) {
                var obj = null,
                    $this = this;
                if (settings.loop) {
                    obj = ob.children('.lslide ').first();
                } else {
                    obj = ob.children().first();
                }
                var setCss = function () {
                    var tH = obj.outerHeight(),
                        tP = 0,
                        tHT = tH;
                    if (fade) {
                        tH = 0;
                        tP = ((tHT) * 100) / elSize;
                    }
                    ob.css({
                        'height': tH + 'px',
                        'padding-bottom': tP + '%'
                    });
                };
                setCss();
                if (obj.find('img').length) {
                    if ( obj.find('img')[0].complete) {
                        setCss();
                        if (!interval) {
                            $this.auto();
                        }   
                    }else{
                        obj.find('img').load(function () {
                            setTimeout(function () {
                                setCss();
                                if (!interval) {
                                    $this.auto();
                                }
                            }, 100);
                        });
                    }
                }else{
                    if (!interval) {
                        $this.auto();
                    }
                }
            },
            active: function (ob, t) {
                if (this.doCss() && settings.mode === 'fade') {
                    $slide.addClass('on');
                }
                var sc = 0;
                if (scene * settings.slideMove < length) {
                    ob.removeClass('active');
                    if (!this.doCss() && settings.mode === 'fade' && t === false) {
                        ob.fadeOut(settings.speed);
                    }
                    if (t === true) {
                        sc = scene;
                    } else {
                        sc = scene * settings.slideMove;
                    }
                    //t === true ? sc = scene : sc = scene * settings.slideMove;
                    var l, nl;
                    if (t === true) {
                        l = ob.length;
                        nl = l - 1;
                        if (sc + 1 >= l) {
                            sc = nl;
                        }
                    }
                    if (settings.loop === true && settings.mode === 'slide') {
                        //t === true ? sc = scene - $el.find('.clone.left').length : sc = scene * settings.slideMove;
                        if (t === true) {
                            sc = scene - $el.find('.clone.left').length;
                        } else {
                            sc = scene * settings.slideMove;
                        }
                        if (t === true) {
                            l = ob.length;
                            nl = l - 1;
                            if (sc + 1 === l) {
                                sc = nl;
                            } else if (sc + 1 > l) {
                                sc = 0;
                            }
                        }
                    }

                    if (!this.doCss() && settings.mode === 'fade' && t === false) {
                        ob.eq(sc).fadeIn(settings.speed);
                    }
                    ob.eq(sc).addClass('active');
                } else {
                    ob.removeClass('active');
                    ob.eq(ob.length - 1).addClass('active');
                    if (!this.doCss() && settings.mode === 'fade' && t === false) {
                        ob.fadeOut(settings.speed);
                        ob.eq(sc).fadeIn(settings.speed);
                    }
                }
            },
            move: function (ob, v) {
                if (settings.rtl === true) {
                    v = -v;
                }
                if (this.doCss()) {
                    if (settings.vertical === true) {
                        ob.css({
                            'transform': 'translate3d(0px, ' + (-v) + 'px, 0px)',
                            '-webkit-transform': 'translate3d(0px, ' + (-v) + 'px, 0px)'
                        });
                    } else {
                        ob.css({
                            'transform': 'translate3d(' + (-v) + 'px, 0px, 0px)',
                            '-webkit-transform': 'translate3d(' + (-v) + 'px, 0px, 0px)',
                        });
                    }
                } else {
                    if (settings.vertical === true) {
                        ob.css('position', 'relative').animate({
                            top: -v + 'px'
                        }, settings.speed, settings.easing);
                    } else {
                        ob.css('position', 'relative').animate({
                            left: -v + 'px'
                        }, settings.speed, settings.easing);
                    }
                }
                var $thumb = $slide.parent().find('.lSPager').find('li');
                this.active($thumb, true);
            },
            fade: function () {
                this.active($children, false);
                var $thumb = $slide.parent().find('.lSPager').find('li');
                this.active($thumb, true);
            },
            slide: function () {
                var $this = this;
                refresh.calSlide = function () {
                    if (w > elSize) {
                        slideValue = $this.slideValue();
                        $this.active($children, false);
                        if ((slideValue) > w - elSize - settings.slideMargin) {
                            slideValue = w - elSize - settings.slideMargin;
                        } else if (slideValue < 0) {
                            slideValue = 0;
                        }
                        $this.move($el, slideValue);
                        if (settings.loop === true && settings.mode === 'slide') {
                            if (scene >= (length - ($el.find('.clone.left').length / settings.slideMove))) {
                                $this.resetSlide($el.find('.clone.left').length);
                            }
                            if (scene === 0) {
                                $this.resetSlide($slide.find('.lslide').length);
                            }
                        }
                    }
                };
                refresh.calSlide();
            },
            resetSlide: function (s) {
                var $this = this;
                $slide.find('.lSAction a').addClass('disabled');
                setTimeout(function () {
                    scene = s;
                    $slide.css('transition-duration', '0ms');
                    slideValue = $this.slideValue();
                    $this.active($children, false);
                    plugin.move($el, slideValue);
                    setTimeout(function () {
                        $slide.css('transition-duration', settings.speed + 'ms');
                        $slide.find('.lSAction a').removeClass('disabled');
                    }, 50);
                }, settings.speed + 100);
            },
            slideValue: function () {
                var _sV = 0;
                if (settings.autoWidth === false) {
                    _sV = scene * ((slideWidth + settings.slideMargin) * settings.slideMove);
                } else {
                    _sV = 0;
                    for (var i = 0; i < scene; i++) {
                        _sV += (parseInt($children.eq(i).width()) + settings.slideMargin);
                    }
                }
                return _sV;
            },
            slideThumb: function () {
                var position;
                switch (settings.currentPagerPosition) {
                case 'left':
                    position = 0;
                    break;
                case 'middle':
                    position = (elSize / 2) - (thumbWidth / 2);
                    break;
                case 'right':
                    position = elSize - thumbWidth;
                }
                var sc = scene - $el.find('.clone.left').length;
                var $pager = $slide.parent().find('.lSPager');
                if (settings.mode === 'slide' && settings.loop === true) {
                    if (sc >= $pager.children().length) {
                        sc = 0;
                    } else if (sc < 0) {
                        sc = $pager.children().length;
                    }
                }
                var thumbSlide = sc * ((thumbWidth + settings.thumbMargin)) - (position);
                if ((thumbSlide + elSize) > pagerWidth) {
                    thumbSlide = pagerWidth - elSize - settings.thumbMargin;
                }
                if (thumbSlide < 0) {
                    thumbSlide = 0;
                }
                this.move($pager, thumbSlide);
            },
            auto: function () {
                if (settings.auto) {
                    clearInterval(interval);
                    interval = setInterval(function () {
                        $el.goToNextSlide();
                    }, settings.pause);
                }
            },
            pauseOnHover: function(){
                var $this = this;
                if (settings.auto && settings.pauseOnHover) {
                    $slide.on('mouseenter', function(){
                        $(this).addClass('ls-hover');
                        $el.pause();
                        settings.auto = true;
                    });
                    $slide.on('mouseleave',function(){
                        $(this).removeClass('ls-hover');
                        if (!$slide.find('.lightSlider').hasClass('lsGrabbing')) {
                            $this.auto();
                        }
                    });
                }
            },
            touchMove: function (endCoords, startCoords) {
                $slide.css('transition-duration', '0ms');
                if (settings.mode === 'slide') {
                    var distance = endCoords - startCoords;
                    var swipeVal = slideValue - distance;
                    if ((swipeVal) >= w - elSize - settings.slideMargin) {
                        if (settings.freeMove === false) {
                            swipeVal = w - elSize - settings.slideMargin;
                        } else {
                            var swipeValT = w - elSize - settings.slideMargin;
                            swipeVal = swipeValT + ((swipeVal - swipeValT) / 5);

                        }
                    } else if (swipeVal < 0) {
                        if (settings.freeMove === false) {
                            swipeVal = 0;
                        } else {
                            swipeVal = swipeVal / 5;
                        }
                    }
                    this.move($el, swipeVal);
                }
            },

            touchEnd: function (distance) {
                $slide.css('transition-duration', settings.speed + 'ms');
                if (settings.mode === 'slide') {
                    var mxVal = false;
                    var _next = true;
                    slideValue = slideValue - distance;
                    if ((slideValue) > w - elSize - settings.slideMargin) {
                        slideValue = w - elSize - settings.slideMargin;
                        if (settings.autoWidth === false) {
                            mxVal = true;
                        }
                    } else if (slideValue < 0) {
                        slideValue = 0;
                    }
                    var gC = function (next) {
                        var ad = 0;
                        if (!mxVal) {
                            if (next) {
                                ad = 1;
                            }
                        }
                        if (!settings.autoWidth) {
                            var num = slideValue / ((slideWidth + settings.slideMargin) * settings.slideMove);
                            scene = parseInt(num) + ad;
                            if (slideValue >= (w - elSize - settings.slideMargin)) {
                                if (num % 1 !== 0) {
                                    scene++;
                                }
                            }
                        } else {
                            var tW = 0;
                            for (var i = 0; i < $children.length; i++) {
                                tW += (parseInt($children.eq(i).width()) + settings.slideMargin);
                                scene = i + ad;
                                if (tW >= slideValue) {
                                    break;
                                }
                            }
                        }
                    };
                    if (distance >= settings.swipeThreshold) {
                        gC(false);
                        _next = false;
                    } else if (distance <= -settings.swipeThreshold) {
                        gC(true);
                        _next = false;
                    }
                    $el.mode(_next);
                    this.slideThumb();
                } else {
                    if (distance >= settings.swipeThreshold) {
                        $el.goToPrevSlide();
                    } else if (distance <= -settings.swipeThreshold) {
                        $el.goToNextSlide();
                    }
                }
            },



            enableDrag: function () {
                var $this = this;
                if (!isTouch) {
                    var startCoords = 0,
                        endCoords = 0,
                        isDraging = false;
                    $slide.find('.lightSlider').addClass('lsGrab');
                    $slide.on('mousedown', function (e) {
                        if (w < elSize) {
                            if (w !== 0) {
                                return false;
                            }
                        }
                        if ($(e.target).attr('class') !== ('lSPrev') && $(e.target).attr('class') !== ('lSNext')) {
                            startCoords = (settings.vertical === true) ? e.pageY : e.pageX;
                            isDraging = true;
                            if (e.preventDefault) {
                                e.preventDefault();
                            } else {
                                e.returnValue = false;
                            }
                            // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723
                            $slide.scrollLeft += 1;
                            $slide.scrollLeft -= 1;
                            // *
                            $slide.find('.lightSlider').removeClass('lsGrab').addClass('lsGrabbing');
                            clearInterval(interval);
                        }
                    });
                    $(window).on('mousemove', function (e) {
                        if (isDraging) {
                            endCoords = (settings.vertical === true) ? e.pageY : e.pageX;
                            $this.touchMove(endCoords, startCoords);
                        }
                    });
                    $(window).on('mouseup', function (e) {
                        if (isDraging) {
                            $slide.find('.lightSlider').removeClass('lsGrabbing').addClass('lsGrab');
                            isDraging = false;
                            endCoords = (settings.vertical === true) ? e.pageY : e.pageX;
                            var distance = endCoords - startCoords;
                            if (Math.abs(distance) >= settings.swipeThreshold) {
                                $(window).on('click.ls', function (e) {
                                    if (e.preventDefault) {
                                        e.preventDefault();
                                    } else {
                                        e.returnValue = false;
                                    }
                                    e.stopImmediatePropagation();
                                    e.stopPropagation();
                                    $(window).off('click.ls');
                                });
                            }

                            $this.touchEnd(distance);

                        }
                    });
                }
            },




            enableTouch: function () {
                var $this = this;
                if (isTouch) {
                    var startCoords = {},
                        endCoords = {};
                    $slide.on('touchstart', function (e) {
                        endCoords = e.originalEvent.targetTouches[0];
                        startCoords.pageX = e.originalEvent.targetTouches[0].pageX;
                        startCoords.pageY = e.originalEvent.targetTouches[0].pageY;
                        clearInterval(interval);
                    });
                    $slide.on('touchmove', function (e) {
                        if (w < elSize) {
                            if (w !== 0) {
                                return false;
                            }
                        }
                        var orig = e.originalEvent;
                        endCoords = orig.targetTouches[0];
                        var xMovement = Math.abs(endCoords.pageX - startCoords.pageX);
                        var yMovement = Math.abs(endCoords.pageY - startCoords.pageY);
                        if (settings.vertical === true) {
                            if ((yMovement * 3) > xMovement) {
                                e.preventDefault();
                            }
                            $this.touchMove(endCoords.pageY, startCoords.pageY);
                        } else {
                            if ((xMovement * 3) > yMovement) {
                                e.preventDefault();
                            }
                            $this.touchMove(endCoords.pageX, startCoords.pageX);
                        }

                    });
                    $slide.on('touchend', function () {
                        if (w < elSize) {
                            if (w !== 0) {
                                return false;
                            }
                        }
                        var distance;
                        if (settings.vertical === true) {
                            distance = endCoords.pageY - startCoords.pageY;
                        } else {
                            distance = endCoords.pageX - startCoords.pageX;
                        }
                        $this.touchEnd(distance);
                    });
                }
            },
            build: function () {
                var $this = this;
                $this.initialStyle();
                if (this.doCss()) {

                    if (settings.enableTouch === true) {
                        $this.enableTouch();
                    }
                    if (settings.enableDrag === true) {
                        $this.enableDrag();
                    }
                }

                $(window).on('focus', function(){
                    $this.auto();
                });
                
                $(window).on('blur', function(){
                    clearInterval(interval);
                });

                $this.pager();
                $this.pauseOnHover();
                $this.controls();
                $this.keyPress();
            }
        };
        plugin.build();
        refresh.init = function () {
            refresh.chbreakpoint();
            if (settings.vertical === true) {
                if (settings.item > 1) {
                    elSize = settings.verticalHeight;
                } else {
                    elSize = $children.outerHeight();
                }
                $slide.css('height', elSize + 'px');
            } else {
                elSize = $slide.outerWidth();
            }
            if (settings.loop === true && settings.mode === 'slide') {
                refresh.clone();
            }
            refresh.calL();
            if (settings.mode === 'slide') {
                $el.removeClass('lSSlide');
            }
            if (settings.mode === 'slide') {
                refresh.calSW();
                refresh.sSW();
            }
            setTimeout(function () {
                if (settings.mode === 'slide') {
                    $el.addClass('lSSlide');
                }
            }, 1000);
            if (settings.pager) {
                refresh.createPager();
            }
            if (settings.adaptiveHeight === true && settings.vertical === false) {
                $el.css('height', $children.eq(scene).outerHeight(true));
            }
            if (settings.adaptiveHeight === false) {
                if (settings.mode === 'slide') {
                    if (settings.vertical === false) {
                        plugin.setHeight($el, false);
                    }else{
                        plugin.auto();
                    }
                } else {
                    plugin.setHeight($el, true);
                }
            }
            if (settings.gallery === true) {
                plugin.slideThumb();
            }
            if (settings.mode === 'slide') {
                plugin.slide();
            }
            if (settings.autoWidth === false) {
                if ($children.length <= settings.item) {
                    $slide.find('.lSAction').hide();
                } else {
                    $slide.find('.lSAction').show();
                }
            } else {
                if ((refresh.calWidth(false) < elSize) && (w !== 0)) {
                    $slide.find('.lSAction').hide();
                } else {
                    $slide.find('.lSAction').show();
                }
            }
        };
        $el.goToPrevSlide = function () {
            if (scene > 0) {
                settings.onBeforePrevSlide.call(this, $el, scene);
                scene--;
                $el.mode(false);
                if (settings.gallery === true) {
                    plugin.slideThumb();
                }
            } else {
                if (settings.loop === true) {
                    settings.onBeforePrevSlide.call(this, $el, scene);
                    if (settings.mode === 'fade') {
                        var l = (length - 1);
                        scene = parseInt(l / settings.slideMove);
                    }
                    $el.mode(false);
                    if (settings.gallery === true) {
                        plugin.slideThumb();
                    }
                } else if (settings.slideEndAnimation === true) {
                    $el.addClass('leftEnd');
                    setTimeout(function () {
                        $el.removeClass('leftEnd');
                    }, 400);
                }
            }
        };
        $el.goToNextSlide = function () {
            var nextI = true;
            if (settings.mode === 'slide') {
                var _slideValue = plugin.slideValue();
                nextI = _slideValue < w - elSize - settings.slideMargin;
            }
            if (((scene * settings.slideMove) < length - settings.slideMove) && nextI) {
                settings.onBeforeNextSlide.call(this, $el, scene);
                scene++;
                $el.mode(false);
                if (settings.gallery === true) {
                    plugin.slideThumb();
                }
            } else {
                if (settings.loop === true) {
                    settings.onBeforeNextSlide.call(this, $el, scene);
                    scene = 0;
                    $el.mode(false);
                    if (settings.gallery === true) {
                        plugin.slideThumb();
                    }
                } else if (settings.slideEndAnimation === true) {
                    $el.addClass('rightEnd');
                    setTimeout(function () {
                        $el.removeClass('rightEnd');
                    }, 400);
                }
            }
        };
        $el.mode = function (_touch) {
            if (settings.adaptiveHeight === true && settings.vertical === false) {
                $el.css('height', $children.eq(scene).outerHeight(true));
            }
            if (on === false) {
                if (settings.mode === 'slide') {
                    if (plugin.doCss()) {
                        $el.addClass('lSSlide');
                        if (settings.speed !== '') {
                            $slide.css('transition-duration', settings.speed + 'ms');
                        }
                        if (settings.cssEasing !== '') {
                            $slide.css('transition-timing-function', settings.cssEasing);
                        }
                    }
                } else {
                    if (plugin.doCss()) {
                        if (settings.speed !== '') {
                            $el.css('transition-duration', settings.speed + 'ms');
                        }
                        if (settings.cssEasing !== '') {
                            $el.css('transition-timing-function', settings.cssEasing);
                        }
                    }
                }
            }
            if (!_touch) {
                settings.onBeforeSlide.call(this, $el, scene);
            }
            if (settings.mode === 'slide') {
                plugin.slide();
            } else {
                plugin.fade();
            }
            if (!$slide.hasClass('ls-hover')) {
                plugin.auto();
            }
            setTimeout(function () {
                if (!_touch) {
                    settings.onAfterSlide.call(this, $el, scene);
                }
            }, settings.speed);
            on = true;
        };
        $el.play = function () {
            $el.goToNextSlide();
            settings.auto = true;
            plugin.auto();
        };
        $el.pause = function () {
            settings.auto = false;
            clearInterval(interval);
        };
        $el.refresh = function () {
            refresh.init();
        };
        $el.getCurrentSlideCount = function () {
            var sc = scene;
            if (settings.loop) {
                var ln = $slide.find('.lslide').length,
                    cl = $el.find('.clone.left').length;
                if (scene <= cl - 1) {
                    sc = ln + (scene - cl);
                } else if (scene >= (ln + cl)) {
                    sc = scene - ln - cl;
                } else {
                    sc = scene - cl;
                }
            }
            return sc + 1;
        }; 
        $el.getTotalSlideCount = function () {
            return $slide.find('.lslide').length;
        };
        $el.goToSlide = function (s) {
            if (settings.loop) {
                scene = (s + $el.find('.clone.left').length - 1);
            } else {
                scene = s;
            }
            $el.mode(false);
            if (settings.gallery === true) {
                plugin.slideThumb();
            }
        };
        $el.destroy = function () {
            if ($el.lightSlider) {
                $el.goToPrevSlide = function(){};
                $el.goToNextSlide = function(){};
                $el.mode = function(){};
                $el.play = function(){};
                $el.pause = function(){};
                $el.refresh = function(){};
                $el.getCurrentSlideCount = function(){};
                $el.getTotalSlideCount = function(){};
                $el.goToSlide = function(){}; 
                $el.lightSlider = null;
                refresh = {
                    init : function(){}
                };
                $el.parent().parent().find('.lSAction, .lSPager').remove();
                $el.removeClass('lightSlider lSFade lSSlide lsGrab lsGrabbing leftEnd right').removeAttr('style').unwrap().unwrap();
                $el.children().removeAttr('style');
                $children.removeClass('lslide active');
                $el.find('.clone').remove();
                $children = null;
                interval = null;
                on = false;
                scene = 0;
            }

        };
        setTimeout(function () {
            settings.onSliderLoad.call(this, $el);
            
   $('.lSGallery li')[2].classList.add('hidden');
        }, 10);
        $(window).on('resize orientationchange', function (e) {
            setTimeout(function () {
                if (e.preventDefault) {
                    e.preventDefault();
                } else {
                    e.returnValue = false;
                }
                refresh.init();
            }, 200);
        });
        return this;
    };
}(jQuery));

$(document).ready(function() {
    $('#lightSlider').lightSlider({
    gallery: true,
    autoWidth: false,
    adaptiveHeight:false,
    item: 1,
    loop:true,
    slideMargin: 0,
    thumbItem:5
    });  
  });

</script>
<script type="text/javascript">

    $('.radio-inline').last().click(); 
   // $('.zoom').zoom(); // add zoom
   $(".checkout_btn_2").on('click', function (e) {
     $('#add_to_cart_modal').modal('hide');
   });
   
   $(".zoom").on("click", function() {
      $('#imagepreview').attr('src', $('#imageresource').attr('src')); // here asign the image to the modal when the user click the enlarge link
      $('#imagemodal').modal('show'); // imagemodal is the id attribute assigned to the bootstrap modal, then i use the show function
   });
   
   
   $(".zoom1").on("click", function() {
      $('#imagepreview').attr('src', $('#imageresource1').attr('src')); // here asign the image to the modal when the user click the enlarge link
      $('#imagemodal').modal('show'); // imagemodal is the id attribute assigned to the bootstrap modal, then i use the show function
   });
   
   
   $(".zoom2").on("click", function() {
      $('#imagepreview').attr('src', $('#imageresource2').attr('src')); // here asign the image to the modal when the user click the enlarge link
      $('#imagemodal').modal('show'); // imagemodal is the id attribute assigned to the bootstrap modal, then i use the show function
   });
   
   
   $(".zoom3").on("click", function() {
      $('#imagepreview').attr('src', $('#imageresource3').attr('src')); // here asign the image to the modal when the user click the enlarge link
      $('#imagemodal').modal('show'); // imagemodal is the id attribute assigned to the bootstrap modal, then i use the show function
   });


   $(".zoom4").on("click", function() {
      $('#imagepreview').attr('src', $('#imageresource4').attr('src')); // here asign the image to the modal when the user click the enlarge link
      $('#imagemodal').modal('show'); // imagemodal is the id attribute assigned to the bootstrap modal, then i use the show function
   });


   $(".zoom5").on("click", function() {
      $('#imagepreview').attr('src', $('#imageresource5').attr('src')); // here asign the image to the modal when the user click the enlarge link
      $('#imagemodal').modal('show'); // imagemodal is the id attribute assigned to the bootstrap modal, then i use the show function
   });

  $(".zoom6").on("click", function() {
      $('#imagepreview').attr('src', $('#imageresource6').attr('src')); // here asign the image to the modal when the user click the enlarge link
      $('#imagemodal').modal('show'); // imagemodal is the id attribute assigned to the bootstrap modal, then i use the show function
   });

  $(".zoom7").on("click", function() {
      $('#imagepreview').attr('src', $('#imageresource7').attr('src')); // here asign the image to the modal when the user click the enlarge link
      $('#imagemodal').modal('show'); // imagemodal is the id attribute assigned to the bootstrap modal, then i use the show function
   });

  $(".zoom8").on("click", function() {
      $('#imagepreview').attr('src', $('#imageresource8').attr('src')); // here asign the image to the modal when the user click the enlarge link
      $('#imagemodal').modal('show'); // imagemodal is the id attribute assigned to the bootstrap modal, then i use the show function
   });

  $(".zoom9").on("click", function() {
      $('#imagepreview').attr('src', $('#imageresource9').attr('src')); // here asign the image to the modal when the user click the enlarge link
      $('#imagemodal').modal('show'); // imagemodal is the id attribute assigned to the bootstrap modal, then i use the show function
   });
   
     var best_product_slider = $('.best_product_slider');
       if (best_product_slider.length) {
         best_product_slider.owlCarousel({
           items: 4,
           loop: true,
           dots: false,
           autoplay: true,
           autoplayHoverPause: true,
           autoplayTimeout: 5000,
           nav: true,
           navText: ["<i class='fa fa-chevron-left'></i>","<i class='fa fa-chevron-right'></i>"],
           responsive: {
             0: {
               margin: 15,
               items: 1,
               nav: false
             },
             576: {
               margin: 15,
               items: 2,
               nav: false
             },
             768: {
               margin: 30,
               items: 3,
               nav: true
             },
             991: {
               margin: 30,
               items: 4,
               nav: true
             }
           }
         });
       }
   
   
   $(document).ready(function(){

    $('.radio-inline').last().click(); 
   
        var product_overview = $('#vertical');
          if(product_overview.length){
           product_overview.lightSlider({
             gallery:true,
             item:1,
             vertical:true,
             verticalHeight:450,
             thumbItem:3,
             slideMargin:0,
             speed:600,
             autoplay: true,
             responsive : [
               {
                   breakpoint:991,
                   settings: {
                       item:1,
                       
                     }
               },
               {
                   breakpoint:576,
                   settings: {
                       item:1,
                       slideMove:1,
                       verticalHeight:350,
                     }
               }
           ]
           });  
          }
   
          (function() {
   
   window.inputNumber = function(el) {
   
   var min = el.attr('min') || false;
   var max = el.attr('max') || false;
   
   var els = {};
   
   els.dec = el.prev();
   els.inc = el.next();
   
   el.each(function() {
   init($(this));
   });
   
   function init(el) {
   
   els.dec.on('click', decrement);
   els.inc.on('click', increment);
   
   function decrement() {
     var value = el[0].value;
     value--;
     if(!min || value >= min) {
       el[0].value = value;
     }
   }
   
   function increment() {
     var value = el[0].value;
     value++;
     if(!max || value <= max) {
       el[0].value = value++;
     }
   }
   }
   }
   })();
   
   inputNumber($('.input-number'));
   
   $( "#home-tab" ).click(function() {
   $( "#home-tab" ).addClass("active");
   $( "#profile-tab" ).removeClass("active");
   $( "#contact-tab" ).removeClass("active");
   $( "#review-tab" ).removeClass("active");
   $("#home").css("display", "block");
   $("#profile").css("display", "none");
   $("#contact").css("display", "none");
   $("#review").css("display", "none");
   });
   
   
   $( "#profile-tab" ).click(function() {
   $( "#profile-tab" ).addClass("active");
   $( "#home-tab" ).removeClass("active");
   $( "#contact-tab" ).removeClass("active");
   $( "#review-tab" ).removeClass("active");
   $("#home").css("display", "none");
   $("#profile").css("display", "block");
   $("#contact").css("display", "none");
   $("#review").css("display", "none");
   });
   
   $( "#contact-tab" ).click(function() {
   $( "#contact-tab" ).addClass("active");
   $( "#profile-tab" ).removeClass("active");
   $( "#home-tab" ).removeClass("active");
   $( "#review-tab" ).removeClass("active");
   $("#home").css("display", "none");
   $("#profile").css("display", "none");
   $("#contact").css("display", "block");
   $("#review").css("display", "none");
   });
   
   $( "#review-tab" ).click(function() {
   $( "#review-tab" ).addClass("active");
   $( "#profile-tab" ).removeClass("active");
   $( "#contact-tab" ).removeClass("active");
   $( "#home-tab" ).removeClass("active");
   $("#home").css("display", "none");
   $("#profile").css("display", "none");
   $("#contact").css("display", "none");
   $("#review").css("display", "block");
   });
   
   $( ".fa-heart-o" ).click(function() {
   if ($('#product-like').hasClass( "fa-heart-o" )) {
     $('#product-like').removeClass("fa-heart-o");
     $('#product-like').addClass("fa-heart");
     toastr.success('Added to favourites')
   }
   else{
     $('#product-like').removeClass("fa-heart");
     $('#product-like').addClass("fa-heart-o");
     toastr.error('Removed to favourites')    
   }
   $( "#like-button" ).click();
   });
   
   $( ".fa-heart" ).click(function() {
   if ($('#product-like').hasClass( "fa-heart" )) {
     $('#product-like').removeClass("fa-heart");
     $('#product-like').addClass("fa-heart-o");
     toastr.error('Removed to favourites')
   }
   else{
     $('#product-like').removeClass("fa-heart-o");
     $('#product-like').addClass("fa-heart");
     toastr.success('Added to favourites')   
   }
   $( "#like-button" ).click();
   });
   });
   
   $(function () {
   
     $("#rateYo").rateYo({
         rating: <%= @rating.present? ? @rating.value : 0.0 %>,
         onSet: function (rating, rateYoInstance) {
             $.ajax({
                 url: '/ratings',
                 method: 'post',
                 contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                 data: jQuery.param({ rating: {value:rating ,parent_id:<%=@product.id%>, parent_type:'<%=Rating.parent_type_product%>'} }),
                 success: function(data){
                    $('#avg-ratting').text(data.avg_ratting);
                    $('#review-count').text(data.review_count);
                 }
             });
         },
     });
     $("#avg_rate").rateYo({
         rating: <%= @avg_rating.present? ? @avg_rating : 0.0 %>,
         readOnly: true
     });
   
   });
   
   $('#new_comment').on('submit', function(e){
   // e.preventDefault(); // don't submit multiple times
   // this.submit(); // use the native submit method of the form element
   url = window.location.pathname;
   id = url.substring(url.lastIndexOf('/') + 1);
   setTimeout(function() {
   $.ajax({
       url:'/products/' + id + '/get_comments',
       type:'get',
       processData:false,
       success:function (data) {
         console.log(data);
         html = "<div class='review_item'><div class='media'><div class='d-flex'>" + "<img src='<%= image_path image %>' style='width:100px'>"
   + "</div><div class='media-body'><h4>" + data.commentor_full_name + "</h4><h5>" + data.date + "</h5><!-- <a class='reply_btn' href='#'>Reply</a> --></div></div><p>" + data.statement + "</p></div>";
         $("#pre-comment").prepend(html);
       },
       error:function (data) {
         // alert ('Need to Login!');
       }
   });
   },100);
   });
   
   
   /////////add to cart /////////
   
   $('#add-to-cart').on('click', function(e){
   // e.preventDefault(); // don't submit multiple times
   // this.submit(); // use the native submit method of the form element
   color = $('.custom-color-label').val();
   count = $(".input-number").val()
   url = window.location.pathname;
   id = url.substring(url.lastIndexOf('/') + 1);
   $.ajax({
       headers: {   'X-CSRF-Token': Rails.csrfToken() },
       url:'/products/' + id + '/add_to_cart?quantity=' + count + '&color=' + color,
       type:'post',
       success:function (data) {
         console.log(data);
       },
       error:function (data) {
           alert ('Error');
       }
   
   });
   });
   
   function validate(evt) {
   var theEvent = evt || window.event;
   
   // Handle paste
   if (theEvent.type === 'paste') {
   key = event.clipboardData.getData('text/plain');
   } else {
   // Handle key press
   var key = theEvent.keyCode || theEvent.which;
   key = String.fromCharCode(key);
   }
   var regex = /[0-9]|\./;
   if( !regex.test(key) ) {
   theEvent.returnValue = false;
   if(theEvent.preventDefault) theEvent.preventDefault();
   }
   }
   
   $('.input-number').on('keydown keyup', function(e){
   if ($(this).val() > 200 
     && e.keyCode !== 46 // keycode for delete
     && e.keyCode !== 8 // keycode for backspace
    ) {
    e.preventDefault();
    $(this).val(200);
   }
   });
   
   $('.share-on-facebook').click(function () {
   blog_id = $(this).data('id');
   type    = $(this).data('type');
   blog    = $(this).data('attributes');
   var url = createFBShareLink(blog_id, type, blog, '3563470663666159');
   window.open(url);
   });
   
   function createFBShareLink(id, type, blog, fbAppId) {
   // var link = window.location.hostname == 'localhost' ? 'http://localhost:3000' : `https://${window.location.hostname}`
   link = "http://test.fairprice.co.za/"
   var root_url = "<%= 'http://test.fairprice.co.za/' %>"
   var url = `http://www.facebook.com/dialog/feed?app_id=${fbAppId}
   &link=${root_url}/product_detail?id=${id}
   &picture=${encodeURIComponent(`${blog.file_name}`)}
   &name=${blog.title}
   &caption=FairPrice product
   &description=This is just for testing purpose
   &redirect_uri=${encodeURIComponent(`${link}/products/${id}`)}
   &display=popup`;
   return url;
   }
   
   $('.custom-reload').on('click', function (e) {
   window.location.reload();
   });
   
   
   $('.radio-inline').click(function () {
       $('.custom-color-label').val($(this).context.htmlFor)
       // window.location.href = '/'
   });
   
   $('.fa-whatsapp').click(function () {
      var x = document.URL
      window.location.href = "whatsapp://send?text="+x
   });

</script>
